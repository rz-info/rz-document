(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a5008"],{"099b":function(t,s,a){"use strict";a.r(s);var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("zTitle",{attrs:{level:"1",text:"列表参数缓存"}},[a("pageCach")],1)},o=[],e=function(){var t=this,s=t.$createElement;t._self._c;return t._m(0)},c=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"markdown"},[a("h2",[t._v("示例")]),a("pre",[a("code",{staticClass:"js"},[t._v("  @"),a("span",{staticClass:"token function"},[t._v("Component")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    name"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"Contractist"')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n  "),a("span",{staticClass:"token keyword"},[t._v("export")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("default")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("class")]),t._v(" "),a("span",{staticClass:"token class-name"},[t._v("Contractist")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("extends")]),t._v(" "),a("span",{staticClass:"token class-name"},[t._v("Vue")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),a("span",{staticClass:"token keyword"},[t._v("private")]),t._v(" searchData"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" Object "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// 筛选数据")]),t._v("\n      name"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('""')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n      contractNumber"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('""')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n      contactName"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('""')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n      phone"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('""')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n      startDate"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('""')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n      endDate"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('""')]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n    "),a("span",{staticClass:"token keyword"},[t._v("private")]),t._v(" tableData"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" any "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// 表格相关字段")]),t._v("\n      data"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token punctuation"},[t._v("]")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n      pageSize"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("10")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n      total"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("1")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n      page"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("1")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n    "),a("span",{staticClass:"token keyword"},[t._v("private")]),t._v(" curTagItems"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" any "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("0")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// 当前活动页签")]),t._v("\n\n    "),a("span",{staticClass:"token comment"},[t._v("//获取列表数据")]),t._v("\n    "),a("span",{staticClass:"token keyword"},[t._v("private")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("getContractInfoList")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n      "),a("span",{staticClass:"token keyword"},[t._v("let")]),t._v(" dto "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        page"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("tableData"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("page"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n        pageSize"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("tableData"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("pageSize"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n        "),a("span",{staticClass:"token operator"},[t._v("...")]),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("searchData\n      "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n      dto "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("getCache")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("$route"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("||")]),t._v(" dto"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// 在此处获取缓存, 如果没有的话就使用原本数据")]),t._v("\n\n      "),a("span",{staticClass:"token function"},[t._v("pageContractInfo")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("dto"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("then")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token parameter"},[t._v("res")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("=>")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("tableData "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" res"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("data"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n        pageCache"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("addCache")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// 接口响应后将请求参数写入缓存")]),t._v("\n          route"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("$route"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n          params"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" dto"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n          other"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n            curTagItems"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("curTagItems\n          "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n        "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n      "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n    "),a("span",{staticClass:"token keyword"},[t._v("private")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("initCurItems")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n      "),a("span",{staticClass:"token keyword"},[t._v("const")]),t._v(" otherCache "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("getCache")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("$route"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("1")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// 二参为1时获取other中的数据")]),t._v("\n      "),a("span",{staticClass:"token keyword"},[t._v("if")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("otherCache"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("curTagItems "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" otherCache"),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("curTagItems"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n    "),a("span",{staticClass:"token function"},[t._v("mounted")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n      "),a("span",{staticClass:"token function"},[t._v("coverSearchData")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("$route"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("searchData"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n      "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("initCurItems")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n")])]),a("h2",[t._v("配置")]),a("p",[t._v("在"),a("code",[t._v("src\\store\\modules\\pageCache.ts")]),t._v("文件中添加要保存缓存的页面路由及跳转后不删除缓存的路由"),a("br"),t._v("如下代码表示从"),a("code",[t._v("/laboratoryList")]),t._v("跳转到"),a("code",[t._v("path")]),t._v("为"),a("code",[t._v("/laboratoryHistory")]),t._v("的路由或"),a("code",[t._v("name")]),t._v("为"),a("code",[t._v("seeUploadTestForm")]),t._v("的路由时不会删除缓存")]),a("pre",[a("code",{staticClass:"ts"},[t._v("  "),a("span",{staticClass:"token keyword"},[t._v("public")]),t._v(" pageParamsMap"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" ObjectOf"),a("span",{staticClass:"token operator"},[t._v("<")]),t._v("pageMap"),a("span",{staticClass:"token operator"},[t._v(">")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// 主页面与二级页面映射")]),t._v("\n    "),a("span",{staticClass:"token string"},[t._v("'/laboratoryList'")]),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("<")]),t._v("pageMap"),a("span",{staticClass:"token operator"},[t._v(">")]),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// 实验室管理")]),t._v("\n      pathList"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token string"},[t._v("'/laboratoryHistory'")]),a("span",{staticClass:"token punctuation"},[t._v("]")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n      nameList"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("[")]),a("span",{staticClass:"token string"},[t._v("'seeUploadTestForm'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'uploadTestTable'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'municipalAdministrationTestForm'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'uploadTestTable'")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token string"},[t._v("'testForm'")]),a("span",{staticClass:"token punctuation"},[t._v("]")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n      isFirst"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token boolean"},[t._v("true")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n    "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")])])]),a("h2",[t._v("使用方法")]),a("pre",[a("code",{staticClass:"js"},[t._v("  "),a("span",{staticClass:"token comment"},[t._v("// 引入 ")]),t._v("\n  "),a("span",{staticClass:"token keyword"},[t._v("import")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    pageCache"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n    getCache"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n    coverSearchData\n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("from")]),t._v(" "),a("span",{staticClass:"token string"},[t._v('"@/store/modules/pageCache"')]),t._v("\n\n  "),a("span",{staticClass:"token comment"},[t._v("// 列表参数, 先获取缓存")]),t._v("\n  dto "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("getCache")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("$route"),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),a("span",{staticClass:"token operator"},[t._v("||")]),t._v(" dto"),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n  "),a("span",{staticClass:"token comment"},[t._v("// 获取其他参数")]),t._v("\n  other "),a("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),a("span",{staticClass:"token function"},[t._v("getCache")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("$route"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token number"},[t._v("1")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n  "),a("span",{staticClass:"token comment"},[t._v("// 在列表接口响应后将此次请求写入缓存")]),t._v("\n  pageCache"),a("span",{staticClass:"token punctuation"},[t._v(".")]),a("span",{staticClass:"token function"},[t._v("addCache")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    route"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("$route"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// 当前路由, 必填")]),t._v("\n    params"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" dto"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// 参数, 必填")]),t._v("\n    other"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" "),a("span",{staticClass:"token comment"},[t._v("// 其他需要缓存的数据, 选填")]),t._v("\n      curTagItems"),a("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("curTagItems\n    "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" \n  "),a("span",{staticClass:"token punctuation"},[t._v("}")]),a("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n\n  "),a("span",{staticClass:"token comment"},[t._v("// 覆盖搜索框参数")]),t._v("\n  "),a("span",{staticClass:"token function"},[t._v("coverSearchData")]),a("span",{staticClass:"token punctuation"},[t._v("(")]),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("$route"),a("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),a("span",{staticClass:"token keyword"},[t._v("this")]),a("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("searchData"),a("span",{staticClass:"token punctuation"},[t._v(")")]),a("span",{staticClass:"token punctuation"},[t._v(";")])])])])}],p=a("2877"),i={},v=Object(p["a"])(i,e,c,!1,null,null,null),_=v.exports,u={components:{pageCach:_}},l=u,k=Object(p["a"])(l,n,o,!1,null,"fa78b920",null);s["default"]=k.exports}}]);
//# sourceMappingURL=chunk-2d0a5008.28100f7b.js.map